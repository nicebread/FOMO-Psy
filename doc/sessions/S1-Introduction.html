<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Intro to theory 1 - First steps in modeling">

<title>Session 01 - Introduction – FOMO-Psy: Formal Modeling of Psychological Theories</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">FOMO-Psy: Formal Modeling of Psychological Theories</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../sessions/sessions_overview.html"> 
<span class="menu-text">Sessions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../lectures/lecture_overview.html"> 
<span class="menu-text">Lectures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../tools.html"> 
<span class="menu-text">Thinking Tools</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../orga_material/orga_material.html"> 
<span class="menu-text">Organizational Material</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/nicebread/FOMO-Psy"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#homework-1-individually" id="toc-homework-1-individually" class="nav-link" data-scroll-target="#homework-1-individually">Homework 1 (individually)</a></li>
  <li><a href="#homework-2-individually" id="toc-homework-2-individually" class="nav-link" data-scroll-target="#homework-2-individually">Homework 2 (individually)</a></li>
  <li><a href="#homework-3-individually-read-the-vast-paper" id="toc-homework-3-individually-read-the-vast-paper" class="nav-link" data-scroll-target="#homework-3-individually-read-the-vast-paper">Homework 3 (individually): Read the VAST paper</a></li>
  <li><a href="#homework-4-individually-your-first-mini-vast-display" id="toc-homework-4-individually-your-first-mini-vast-display" class="nav-link" data-scroll-target="#homework-4-individually-your-first-mini-vast-display">Homework 4 (individually): Your first (mini) VAST display</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Session 01 - Introduction</h1>
</div>

<div>
  <div class="description">
    Intro to theory 1 - First steps in modeling
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="overview" class="level1">
<h1>Overview</h1>
<table class="table-striped caption-top table">
<thead>
<tr class="header">
<th>Topic</th>
<th>Duration</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Introduction</td>
<td>5</td>
<td>Instructor introduction</td>
</tr>
<tr class="even">
<td>Introduction of students in the plenum</td>
<td>15</td>
<td>Guiding questions: Name, home town, why chose this Empra. Write your name tag.</td>
</tr>
<tr class="odd">
<td>Formalia</td>
<td>20</td>
<td><a href="../lectures/Empra-Orga/Empra-Orga.html">Slides</a></td>
</tr>
<tr class="even">
<td><strong>Lecture</strong>: Introduction: Theory crisis</td>
<td>90</td>
<td><a href="../lectures/Intro1/FOMO-Psy_1_Theory_crisis.html">Slides</a></td>
</tr>
<tr class="odd">
<td>Wrap up <strong>[Homework 2]</strong>: Smaldino (2013), Chapter 1</td>
<td>15</td>
<td></td>
</tr>
<tr class="even">
<td>Git Tutorial troubleshooting</td>
<td>20</td>
<td></td>
</tr>
<tr class="odd">
<td>Mini Introduction VAST</td>
<td>30</td>
<td><a href="../lectures/VAST/VAST_Intro.html">Slides</a></td>
</tr>
</tbody>
</table>
</section>
<section id="homework-1-individually" class="level1">
<h1>Homework 1 (individually)</h1>
<p><strong>Goals</strong>: Learn how to <code>pull</code>, <code>commit</code>, and <code>push</code> to Github. Be able to resolve a merge conflict.</p>
<ol type="1">
<li>Create a Github account. (Skip if you have one already).</li>
<li>Send your Github user name to me via email. I will give you access to the course’s private <em>Homework Repository</em>: <a href="https://github.com/nicebread/FOMO-homework_2024">https://github.com/nicebread/FOMO-homework_2024</a>. (Note: You won’t be able to access, clone, or even see the repository until the lecturer has granted you access).</li>
</ol>
<p>If you are proficient in <code>git</code>, you can skip step 3:</p>
<ol start="3" type="1">
<li>Do the tutorial <a href="https://malikaihle.github.io/Introduction-RStudio-Git-GitHub/">“Introduction to Version Control in R with RStudio, Git, and Github”</a>, <strong>and</strong> complete the follow-up tutorial “<a href="https://lmu-osc.github.io/Collaborative-RStudio-GitHub/">Collaborative coding with GitHub and RStudio</a>”. Depending on your prior knowledge, completing both tutorials will take between 30 min. and 2.5h.</li>
<li>Once you have been granted access to the <a href="https://github.com/nicebread/FOMO-homework_2024">Homework Repository</a>, <code>clone</code> the repository to your local machine. (This cannot be done on an iPad or smartphone; you need a computer for that.)</li>
</ol>
<p><strong>Deliverable</strong>:</p>
<p>Push your answer from Homework 2 (see below) to the folder <code>homework/01-Smaldino-chapter</code> of the remote repository (i.e., first save your file locally in the respective folder, then <code>commit</code> and <code>push</code>).</p>
</section>
<section id="homework-2-individually" class="level1">
<h1>Homework 2 (individually)</h1>
<p>Download <a href="https://pup-assets.imgix.net/onix/images/9780691224145/9780691224138.pdf">Chapter 1</a> of Paul Smaldino’s Book “Modeling Social Behavior: Mathematical and Agent-Based Models of Social Dynamics and Cultural Evolution”. Read the chapter and answer the following guiding questions:</p>
<ol type="1">
<li>A typical criticism of formal models is: “You baked your results into the model, so the conclusions are trivial”. What could you answer to such a statement?</li>
</ol>
<!-- Answer: Yes, the conclusions follow directly from the assumptions - to that extent, the criticism has a true core. But that does not diminish the usefulness of formal models: Often the conclusions don't trivialy follow from the assumptions; humans are not good in directly inferring conclusions from, say, non-linear or complex models. Models allow to check, whether our assumptions *actually* lead to the phenomena that should be explained. -->
<ol start="2" type="1">
<li>What is done in a “decomposition”?</li>
</ol>
<!-- Answer: A decomposition gives answers to the following questions: What are the parts of the system we are interested in? What are their properties? What are the relationships between the parts and their properties? How do those properties and relationships change?  -->
<ol start="3" type="1">
<li>What question should guide the decomposition?</li>
</ol>
<!-- Answer: How you decompose a system depends on the questions you are trying to answer with your model and on the granularity required for answers to those questions. It is the question that determines the relevant parts of the system! -->
<ol start="4" type="1">
<li>What is, according to Smaldino, the key difference between <em>exact</em> and <em>inexact</em> sciences?</li>
</ol>
<!-- Answer: In the exact sciences, theories involve direct mappings between measurable constructs and model predictions— the terms in their fundamental equations all have universally-accepted units.
The inexact sciences are those in which the mappings between measurements and theo- ries are imprecise. -->
<ol start="5" type="1">
<li>Name the two types of models that typically are employed in social sciences.</li>
</ol>
<!-- Answer: Equation-based models and agent-based models -->
<p><strong>Deliverable</strong>: Submit answers to the guiding questions as a plain text or markdown file to the course’s <a href="https://github.com/nicebread/FOMO-homework_2024">Homework Repository</a>:</p>
<ul>
<li>Navigate to <code>/homework/01-Smaldino-chapter</code> (After you cloned the repository in Homework 1, you should have that folder somewhere on your local machine.)</li>
<li>Add your answers as <code>.txt</code> or <code>.md</code> file with your first name as filename (e.g., “<code>Heinz-Ruediger.md</code>”)</li>
<li><code>commit</code> and <code>push</code></li>
<li>(To verify your submission: If you go to the <a href="https://github.com/nicebread/FOMO-homework_2024">website</a> of the repository, you should see your file in the folder <code>01-Smaldino-chapter</code>.)</li>
</ul>
<p>You can answer in English or in German. Most questions can be easily answered in one sentence. Feel free to copy and paste the relevant sentences from the paper. If you are tempted to use ChatGPT, better don’t do the homework at all (after all, the goal of this exercise is that you <em>learn</em> something, not that you make your lecturer happy).</p>
<p>Using <code>git</code> for the first time can be challenging. But it’s a skill that will pay off in the long run. If you get stuck, and made honest attempts to solve the problems yourself, don’t get desperate: Just send me your homework via email, and we will sort it out together in the next session.</p>
</section>
<section id="homework-3-individually-read-the-vast-paper" class="level1">
<h1>Homework 3 (individually): Read the VAST paper</h1>
<p>Read the VAST paper:</p>
<p>Leising, D., Grenke, O., &amp; Cramer, M. (2023). Visual Argument Structure Tool (VAST) Version 1.0. <em>Meta-Psychology</em>, 7. <a href="https://open.lnu.se/index.php/metapsychology/article/view/2911">https://open.lnu.se/index.php/metapsychology/article/view/2911</a></p>
<p><strong>Deliverable</strong>: Nothing - just read it and understand it.</p>
</section>
<section id="homework-4-individually-your-first-mini-vast-display" class="level1">
<h1>Homework 4 (individually): Your first (mini) VAST display</h1>
<p>This homework consists of three steps, A, B, and C:</p>
<ol type="A">
<li>Read the original definition of the concept “diffusion of responsibility”, printed below. Darley and Latané introduced the term in <a href="https://doi.apa.org/doi/10.1037/h0025589">1968</a>, it’s even in the title of the publication: “Bystander intervention in emergencies: Diffusion of responsibility.”</li>
</ol>
<p>These are the paragraphs that describe the concept (p.&nbsp;377f):</p>
<blockquote class="blockquote">
<p>[After introducing the case of Kitty Genovese:] “In certain circumstances, the norms favoring intervention may be weakened, leading bystanders to resolve the conflict in the direction of nonintervention. One of these circumstances may be the presence of other onlookers. For example, in the case above, each observer, by seeing lights and figures in other apartment house windows, knew that others were also watching. However, there was no way to tell how the other observers were reacting. These two facts provide several reasons why any individual may have delayed or failed to help. The responsibility for helping was diffused among the observers; there was also diffusion of any potential blame for not taking action; and finally, it was possible that somebody, unperceived, had already initiated helping action.</p>
<p>When only one bystander is present in an emergency, if help is to come, it must come from him. Although he may choose to ignore it (out of concern for his personal safety, or desires “not to get involved”), any pressure to intervene focuses uniquely on him. When there are several observers present, however, the pressures to intervene do not focus on any one of the observers; instead the responsibility for intervention is shared among all the onlookers and is not unique to any one. As a result, no one helps.</p>
<p>A second possibility is that potential blame may be diffused. However much we may wish to think that an individual’s moral behavior is divorced from considerations of personal punishment or reward, there is both theory and evidence to the contrary (Aronfreed, 1964; Miller &amp; Bollard, 1941, Whiting &amp; Child, 19S3). It is perfectly reasonable to assume that, under circumstances of group responsibility for a punishable act, the punishment or blame that accrues to any one individual is often slight or nonexistent.</p>
<p>Finally, if others are known to be present, but their behavior cannot be closely observed, any one bystander can assume that one of the other observers is already taking action to end the emergency. Therefore, his own intervention would be only redundant—perhaps harmfully or confusingly so. Thus, given the presence of other onlookers whose behavior cannot be observed, any given bystander can rationalize his own inaction by convincing himself that “somebody else must be doing something.”</p>
</blockquote>
<ol start="2" type="A">
<li><p>Draw your first (mini) VAST display for the definition of the concept “diffusion of responsibility” with <a href="https://app.diagrams.net">draw.io</a> (see concrete instructions below under “Deliverable”). As you noted, Darley and Latané provide no explicit section stating “Diffusion of responsibility is defined as …”. Therefore, you need to capture the essential elements of their definition yourself; do it precisely but also concisely in your VAST display.</p></li>
<li><p><em>After</em> you created your VAST display, read a more recent summary of the concept in the <a href="https://dorsch.hogrefe.com/stichwort/diffusion-der-verantwortung">Dorsch Lexikon der Psychologie</a>, in particular the first and the third (last) paragraph. <strong>Write a few sentences, elaborating to what extent this definition is compatible to your own VAST display, and where it deviates.</strong></p></li>
</ol>
<!-- Notes:
In the Dorsch text, the definition mostly relates to the empirical phenomenon that the helping behavior is diminished. But then the label does not really fit, because this refers to a suggested psychological process with unobservable psychological variables (i.e., the feeling of responsibility). In theory, the empirical phenomenon ("less helping") could be there *without* a decrease in felt responsibility.

One sentence seems to be tautological (at least when you read the label literally): "Die Erklärung der Diffusion der Verantwortung besteht nach Latané und Nida (1981) darin, dass sich Zeugen einer Notlage weniger für eine Intervention verantwortlich fühlen, wenn sie Teil einer Gruppe sind."

Last paragraph: "Neben der Diffusion der Verantwortung trägt auch die pluralistische Ignoranz und die Hemmung durch die Beobachtung durch andere zur Verringerung der Interventionsbereitschaft" -> if "diffusion of responsibility" *IS* "Verringerung der Interventionsbereitschaft", then this sentence is tautological as well.
 -->
<p><strong>Deliverable</strong>: For task 4B, save your draw.io VAST diagram in our <a href="https://github.com/nicebread/FOMO-homework_2024">Homework Repository</a> by choosing “Github” as destination for your file:</p>
<p><img src="img/S1_drawio_0.png" class="img-fluid"></p>
<p>Then choose the Homework Repository:</p>
<p><img src="img/S1_drawio_1.png" class="img-fluid"></p>
<p>… and navigate to the correct homework folder:</p>
<p><img src="img/S1_drawio_2.png" class="img-fluid"></p>
<p>Save the diagram with your name as filename (<code>homework/02-VAST/YOURNAME.drawio</code>). <em>Additionally</em>, save the diagram as a <code>.png</code> or <code>.jpg</code> file in the same folder (<code>homework/02-VAST/YOURNAME.png</code>).</p>
<p>For task 4C, save a file with your answers in the same folder (<code>homework/02-VAST/YOURNAME.md</code>). Don’t forget to <code>push</code> everything to the remote repo.</p>
<!-- - Reflect with a few sentences: What does the chosen label "diffusion" imply for the process? What analogy does it suggest, and what are the implications if this analogy is taken literally? -->
<!-- 
Analogy: Diffusion of molecules in gases.
Possible implications:
(a) Responsibility is a fixed quantity
(b) Diffusion means that it flows to all corners of the room until the pressure is equally distributed. Adding more persons to the group is like opening up new adjactent rooms, where the gases diffuse into.
(c) If the room suddenly gets larger, the gas does not suddenly jump to a uniform distribution - it slowly diffuses to equalize the pressure/concentration of molecules. Is that the same in groups? If you start alone, and then more people are added to the group?
 -->


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/nicebread\.github\.io\/FOMO-Psy\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>